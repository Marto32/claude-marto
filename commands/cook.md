---
model: claude-opus-4-5
---

# Cook Command

Execute an implementation plan end-to-end via the @cook orchestration agent.

## Input

$ARGUMENTS

## Input Validation (MANDATORY)

**This command requires a SINGLE implementation plan document as input.**

Before proceeding, validate the input:

1. **Check argument count**: Must be exactly ONE file path
   - If zero arguments: "Error: No implementation plan provided. Please provide a path to an implementation plan document (output from @implementation-planner)."
   - If multiple arguments: "Error: Expected a single implementation plan, but received multiple paths. Please provide exactly one implementation plan document."

2. **Check file exists**: The file must exist at the provided path
   - If not found: "Error: Implementation plan not found at '{path}'. Please verify the path is correct."

3. **Validate file is an implementation plan**: The file must contain implementation plan structure
   - Check for "## Implementation Tasks" section
   - Check for task IDs (e.g., "1.1", "1.1.1")
   - Check for "Source Design:" header linking to design document
   - If missing: "Error: '{path}' does not appear to be a valid implementation plan. Implementation plans should be generated by @implementation-planner and contain:
     - A 'Source Design:' header linking to the design document
     - A '## Implementation Tasks' section
     - Numbered task IDs (e.g., 1.1, 1.1.1)
     - [PARALLEL]/[SEQUENTIAL] markers

     To create an implementation plan, first run @implementation-planner with your design document."

**DO NOT proceed if validation fails.** Return the appropriate error message and stop.

## Workflow

### Step 1: Execute Implementation Plan

Spawn the `@cook` agent to execute the implementation plan:

```
Task(
  subagent_type="claude-marto-toolkit:cook",
  prompt="Execute the following implementation plan: $ARGUMENTS

  WORKFLOW REMINDERS:
  1. Parse the plan and extract source design document
  2. Spawn @deep-code-research FIRST to understand the codebase
  3. Execute tasks respecting [PARALLEL]/[SEQUENTIAL] markers
  4. Spawn @ic4 agents for ALL implementation (TDD: tests first, then implement)
  5. Track progress by marking tasks [x] complete
  6. Spawn @verifier after all implementation to confirm everything works

  DO NOT IMPLEMENT DIRECTLY - ONLY SPAWN SUBAGENTS."
)
```

Wait for @cook to complete all implementation work.

### Step 2: Report Results

Provide a summary including:
1. Implementation plan execution status (all tasks complete?)
2. Verification results (all tests passing?)
3. GitHub Issues ready to close (list with commands)
4. Commit hashes for each completed task
5. Next steps if any issues were found

## Critical Boundaries

**Input Requirements:**
- Exactly ONE implementation plan document
- Must be output from @implementation-planner
- Must contain valid plan structure (tasks, IDs, markers)

**DO NOT:**
- Accept raw design documents (use @implementation-planner first)
- Accept multiple documents
- Skip input validation
- Implement directly - only spawn subagents

## Error Messages

Use these exact error messages for validation failures:

**No input:**
```
Error: No implementation plan provided.

Usage: /cook <path-to-implementation-plan>

Example: /cook docs/implementation_plans/implementation-plan-auth-2024-01-15.md

To create an implementation plan from a design document, run:
  @implementation-planner <path-to-design-document>
```

**Multiple inputs:**
```
Error: Expected a single implementation plan, but received multiple paths.

This command accepts exactly ONE implementation plan document.

Usage: /cook <path-to-implementation-plan>

If you have multiple implementation plans, execute them one at a time.
```

**File not found:**
```
Error: Implementation plan not found at '{path}'.

Please verify the file path is correct and the file exists.
```

**Invalid format:**
```
Error: '{path}' does not appear to be a valid implementation plan.

Valid implementation plans (from @implementation-planner) contain:
- "Source Design:" header linking to the design document
- "## Implementation Tasks" section
- Numbered task IDs (1.1, 1.1.1, etc.)
- [PARALLEL]/[SEQUENTIAL] execution markers
- Complexity tags [S], [M], [L]
- Dependencies (Deps: X.Y)

To create an implementation plan from a design document:
  @implementation-planner <path-to-design-document>
```
